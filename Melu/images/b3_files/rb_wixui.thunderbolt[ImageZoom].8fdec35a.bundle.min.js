!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@wix/image-kit"),require("react")):"function"==typeof define&&define.amd?define("rb_wixui.thunderbolt[ImageZoom]",["imageClientApi","react"],t):"object"==typeof exports?exports["rb_wixui.thunderbolt[ImageZoom]"]=t(require("@wix/image-kit"),require("react")):e["rb_wixui.thunderbolt[ImageZoom]"]=t(e.__imageClientApi__,e.React)}("undefined"!=typeof self?self:this,(function(e,t){return function(){var a={42662:function(t){"use strict";t.exports=e},5329:function(e){"use strict";e.exports=t},448:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},i={};function n(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return a[e](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{components:function(){return ee}});var e=n(448),t=n.n(e),a=n(5329);const i=(e,t=0)=>{let a,i=!1;return function n(...r){i?a=r:(e.apply(this,r),i=!0,setTimeout((()=>{i=!1,a&&(n.apply(this,a),a=null)}),t))}},o=e=>Object.entries(e).reduce(((e,[t,a])=>(t.includes("data-")&&(e[t]=a),e)),{});function s(e){var t,a,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=s(e[t]))&&(i&&(i+=" "),i+=a);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}var l=function(){for(var e,t,a=0,i="";a<arguments.length;)(e=arguments[a++])&&(t=s(e))&&(i&&(i+=" "),i+=t);return i};const c=13,d=27,u=37,g=39;function m(e){return t=>{t.keyCode===e&&(t.preventDefault(),t.stopPropagation(),t.currentTarget.click())}}const h=m(32),p=m(c),f=e=>{p(e),h(e)},b=m(d),v=new RegExp("<%= compId %>","g"),x=(e,t)=>e.replace(v,t);var y="HlRz5e",E=n(42662);const{STATIC_MEDIA_URL:M}=E,w=({fittingType:e,src:t,target:a,options:i})=>{const n=E.getPlaceholder(e,t,a,Object.assign(Object.assign({},i),{autoEncode:!0}));return(null==n?void 0:n.uri)&&!/^[a-z]+:/.test(n.uri)&&(n.uri=`${M}${n.uri}`),n},I=/^[a-z]+:/;var O=e=>{var t,i;const{id:n,containerId:r,uri:o,alt:s,name:l="",role:c,width:d,height:u,displayMode:g,devicePixelRatio:m,quality:h,alignType:p,bgEffectName:f="",focalPoint:b,upscaleMethod:v,className:x="",crop:E,imageStyles:O={},targetWidth:C,targetHeight:j,targetScale:k,onLoad:P=(()=>{}),onError:_=(()=>{}),shouldUseLQIP:B,containerWidth:N,containerHeight:S,getPlaceholder:T,isInFirstFold:H,placeholderTransition:L,socialAttrs:W,isSEOBot:A,skipMeasure:R,lazyLoadImgExperimentOpen:D,hasAnimation:z,allowWEBPTransform:K}=e,q=a.useRef(null);let $="";const Z="blur"===L,F=a.useRef(null);if(!F.current)if(T||B||H||A){const e=Object.assign(Object.assign({upscaleMethod:v},h||{}),{shouldLoadHQImage:H,isSEOBot:A,hasAnimation:z,allowWEBPTransform:K});F.current=(T||w)({fittingType:g,src:{id:o,width:d,height:u,crop:E,name:l,focalPoint:b},target:{width:N,height:S,alignment:p,htmlTag:"img"},options:e}),$=!F.current.transformed||H||A?"":"true"}else F.current={uri:void 0,css:{img:{}},attr:{img:{},container:{}},transformed:!1};const Q=!A&&(T||B)&&!H&&F.current.transformed,U=a.useMemo((()=>JSON.stringify(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({containerId:r},r&&{containerId:r}),p&&{alignType:p}),R&&{skipMeasure:!0}),{displayMode:g}),N&&{targetWidth:N}),S&&{targetHeight:S}),C&&{targetWidth:C}),j&&{targetHeight:j}),k&&{targetScale:k}),{isLQIP:Q,isSEOBot:A,lqipTransition:L,imageData:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({width:d,height:u,uri:o,name:l,displayMode:g,hasAnimation:z},h&&{quality:h}),m&&{devicePixelRatio:m}),b&&{focalPoint:b}),E&&{crop:E}),v&&{upscaleMethod:v})}))),[r,p,R,g,S,N,C,j,k,Q,A,L,d,u,o,l,h,m,b,E,v,z]),G=F.current,J=null==G?void 0:G.uri,X=null==G?void 0:G.srcset,V=null===(t=G.css)||void 0===t?void 0:t.img,Y=`${y} ${x}`;a.useEffect((()=>{const e=q.current;P&&(null==e?void 0:e.currentSrc)&&(null==e?void 0:e.complete)&&P({target:q.current})}),[]);const ee=G&&!(null==G?void 0:G.transformed)?`max(${d}px, 100%)`:C?`${C}px`:null;return a.createElement("wow-image",{id:n,class:Y,"data-image-info":U,"data-bg-effect-name":f,"data-has-ssr-src":$,"data-animate-blur":!A&&Q&&Z?"":void 0,style:ee?{"--wix-img-max-width":ee}:{}},a.createElement("img",Object.assign({src:J,ref:q,alt:s||"",role:c,style:Object.assign(Object.assign({},V),O),onLoad:P,onError:_},N&&{width:N},S&&{height:S},W,H?{srcSet:null===(i=null==X?void 0:X.dpr)||void 0===i?void 0:i.map((e=>I.test(e)?e:`${M}${e}`)).join(", "),fetchpriority:"high"}:D?{loading:"lazy"}:{})))};const C={root:"linkElement"},j=(e,i)=>{const{href:n,role:r,target:s,rel:l,className:c="",children:d,linkPopupId:u,anchorDataId:g,anchorCompId:m,tabIndex:b,dataTestId:v=C.root,title:x,onClick:y,onDoubleClick:E,onMouseEnter:M,onMouseLeave:w,onFocusCapture:I,onBlurCapture:O,"aria-live":j,"aria-disabled":k,"aria-label":P,"aria-labelledby":_,"aria-pressed":B,"aria-expanded":N,"aria-describedby":S,"aria-haspopup":T}=e,H=void 0!==e.activateByKey?e.activateByKey:(e=>e?"SpaceOrEnter":"Space")(u);let L;switch(H){case"Enter":L=p;break;case"Space":L=h;break;case"SpaceOrEnter":L=f;break;default:L=void 0}return void 0!==n?a.createElement("a",t()({},o(e),{"data-testid":v,"data-popupid":u,"data-anchor":g,"data-anchor-comp-id":m,href:n||void 0,target:s,role:u?"button":r,rel:l,className:c,onKeyDown:L,"aria-live":j,"aria-disabled":k,"aria-label":P,"aria-labelledby":_,"aria-pressed":B,"aria-expanded":N,"aria-haspopup":T,"aria-describedby":S,title:x,onClick:y,onMouseEnter:M,onMouseLeave:w,onDoubleClick:E,onFocusCapture:I,onBlurCapture:O,ref:i,tabIndex:u?0:b}),d):a.createElement("div",t()({},o(e),{"data-testid":v,className:c,tabIndex:b,"aria-label":P,"aria-labelledby":_,"aria-haspopup":T,"aria-disabled":k,title:x,role:r,onClick:y,onDoubleClick:E,onMouseEnter:M,onMouseLeave:w,ref:i}),d)};var k=a.forwardRef(j);const P="link",_="prev",B="next",N="close",S={marginTop:0,marginLeft:0,dialogBoxHeight:600,dialogBoxWidth:600,imageContainerWidth:500,imageContainerHeight:500},T={horizontal:0,vertical:85},H=240,L=60,W=function(e,t){void 0===e&&(e=[]);const a=e.findIndex((e=>{let{id:a}=e;return a===t}));return-1!==a?a:0},A=e=>{let{panelHeight:t,screenMeasures:a,dialogBoxPadding:i,...n}=e;const{height:r}=a,o=(e=>{let{imageMeasures:t,maxImageWidth:a,maxImageHeight:i,minBoxWidth:n}=e;const r=a/t.width,o=i/t.height,s=Math.min(r,o);return{width:Math.max(Math.round(t.width*s),n),height:Math.round(t.height*s)}})(n),s=o.width+(i.horizontal||0),l=o.height+t+(i.vertical||0),c=Math.ceil(Math.max((r-l)/2,0));return{marginLeft:i.horizontal/2,marginTop:c,dialogBoxHeight:l,dialogBoxWidth:s,imageContainerWidth:o.width,imageContainerHeight:o.height}};var R="lQwAgp",D="uuK35W",z="zcU_VZ",K="i_vvWK",q="JMM2KW",$="YRSSGK",Z="XN0hAn",F="_O9Cuj",Q="dBklX7",U="Hf5W3Z",G="jOqgDj",J="P6ZpNH",X="vJh_3i",V="em3A_G";var Y=e=>{var n;const{id:r,className:s,onClose:c,images:m,selectedImageIndex:h,onImageChangeCallback:p}=e,f=a.useRef(null),v=a.useRef(null),[y,E]=a.useState(S),[M,w]=a.useState(!0),I="img_"+r+"_"+h,C=()=>h+1<m.length?h+1:0,j=()=>h?h-1:m.length-1,W=(e,t)=>{w(!1),setTimeout((()=>{const a=m[e].id;t&&(t.stopPropagation(),t.preventDefault()),p(a)}),250)},{link:Y,title:ee,description:te,width:ae,height:ie}=m[h],ne=()=>{c(!1)};var re;a.useEffect((()=>{const e=document.activeElement;return f.current&&f.current.focus(),()=>e&&e.focus()}),[]),re=()=>{var e;const t=i(se,300);return t(),null==(e=window)||e.addEventListener("resize",t),()=>{var e;null==(e=window)||e.removeEventListener("resize",t)}},(0,a.useEffect)(re,[]);const oe=e=>{e.target instanceof HTMLAnchorElement||e.stopPropagation()},se=()=>{var e,t;const a=null==(e=f.current)?void 0:e.getBoundingClientRect(),i=null==(t=v.current)?void 0:t.getBoundingClientRect();if(a){const e={imageMeasures:{width:ae,height:ie},screenMeasures:{width:a.width,height:a.height},panelHeight:(null==i?void 0:i.height)||0};E((e=>{const{screenMeasures:t,imageMeasures:a,panelHeight:i}=e,n=T,{width:r,height:o}=t,s=i||20,l=H,c=L/2+s+n.vertical,d=Math.min(a.width,r-l),u=Math.min(a.height,o-c);return A({imageMeasures:a,screenMeasures:t,maxImageWidth:d,maxImageHeight:u,panelHeight:s,minBoxWidth:600,dialogBoxPadding:n})})(e))}},le=m.length>1?{onKeyDown:e=>{switch(e.keyCode){case g:W(C());break;case u:W(j());break;case d:ne()}}}:{onClick:ne},ce=m.length>1&&(null==(n=m[h])||null==(n=n.link)||!n.linkPopupId)?ne:void 0,de=((e,t)=>t?{"--filter-effect-svg-url":x(t,e)}:{})(I,m[h].filterEffectSvgUrl);return a.createElement("div",t()({className:l(s,R)},le),a.createElement("div",t()({id:r},o(e),{className:D,tabIndex:0,ref:f,onKeyDown:b,"data-testselectedimageindex":h}),a.createElement("div",{className:l(z,{[K]:!M}),style:{maxWidth:y.dialogBoxWidth,maxHeight:y.dialogBoxHeight,marginTop:y.marginTop,"--width":y.imageContainerWidth+"px","--height":y.imageContainerHeight+"px",...de}},a.createElement(O,t()({},m[h],{onLoad:()=>{w(!0),se()},className:V,id:"img_"+r+"_"+h,displayMode:"fit"})),a.createElement("div",{className:l(U,{[K]:!M}),onClick:oe,ref:v},ee&&a.createElement("h3",{itemProp:"name",className:G},ee),te&&a.createElement("p",{itemProp:"description",className:X},te),Y&&a.createElement(k,t()({},Y,{dataTestId:P,className:J,onClick:ce}),"Go to link"))),a.createElement("div",{className:q,onKeyDown:b,"data-testid":N,onClick:m.length>1?ne:void 0},a.createElement("svg",{viewBox:"0 0 180 180",className:$,tabIndex:0,role:"button","aria-label":"close"},a.createElement("path",{d:"M5 5 L175 175 M175 5 L5 175"}))),m.length>1&&a.createElement(a.Fragment,null,a.createElement("div",{className:Z,onClick:e=>{W(C(),e)},"data-testid":B},a.createElement("svg",{viewBox:"0 0 180 310",className:Q,tabIndex:0,role:"button","aria-label":"next"},a.createElement("path",{d:"M10 10 L170 161 M170 150 L10 300"}))),a.createElement("div",{className:F,onClick:e=>{W(j(),e)},"data-testid":_},a.createElement("svg",{viewBox:"0 0 180 310",className:Q,tabIndex:0,role:"button","aria-label":"previous"},a.createElement("path",{d:"M170 10 L10 161 M10 150 L170 300"}))))))};const ee={ImageZoom:{component:e=>{const{id:i,className:n,uri:r,alt:s,name:l,width:c,height:d,displayMode:u,onClose:g,link:m,title:h,images:p,dataItemId:f="",onImageChange:b}=e,v={id:i,containerId:i,uri:r,alt:s,name:l,width:c,height:d,displayMode:u,link:m,title:h},[x,y]=a.useState(f),E=null!=p?p:[v];return a.createElement(Y,t()({id:i},o(e),{className:n,images:E,selectedImageIndex:W(E,x),onImageChangeCallback:e=>{y(e),null==b||b(e)},onClose:g}))}}}}(),r}()}));
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/rb_wixui.thunderbolt[ImageZoom].8fdec35a.bundle.min.js.map